{% extends 'SmartE_app/base.html' %}

{% block content %}
  <h2>Course Details</h2>
  <p>Course ID: {{ course.course_id }}</p>
  <p>Name: {{ course.name }}</p>
  <p>Membership Access Level: {{ course.membership_access_level }}</p>

  <!-- Add other course details as needed -->

  <h2>Add a New Module</h2>
  <form method="post" enctype="multipart/form-data">
    {% csrf_token %}
    {{ chapter_form.as_p }}
    <button type="submit">Add Chapter</button>
  </form>


  <!-- Display existing chapters and their content -->
  <h2>Modules</h2>
  <ul>
    {% for chapter in course.coursemodules_set.all %}
      <li>
        <a href="{% url 'SmartE_app:module_detail' course_id=course.course_id module_id=chapter.id %}">
          {{ chapter.module_name }}
        </a>
        {% if chapter.content %}
          <p>{{ chapter.content }}</p>
        {% else %}
          <p>No content available.</p>
        {% endif %}
        {% for file_obj in chapter.filesstorage_set.all %}
          <a href="{{ file_obj.file.url }}" download>Download File</a>
        {% endfor %}
      </li>
    {% endfor %}
  </ul>
{% endblock %}
